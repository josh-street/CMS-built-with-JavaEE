<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>IFAF</title>
        <link href="../css/style.css" rel="stylesheet" type="text/css" />
        <script src='../js/lib.js' type='text/javascript'></script>
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/>
    </h:head>
    <h:body>
        <div id="header">
            <h1><a>IFAF</a></h1><h1>Rule Change Suggestion</h1>
            <div id="logout">
                <h:form>
                    <p>Logged in as #{loginController.loggedinUsername}. 
                        <h:commandButton value="Logout" action="#{loginController.doLogout()}"/>
                    </p>
                </h:form>
            </div>
        </div>
        <div id="content">
            <div id="newSuggestion">

                <button id="newSuggestionBTN">New Rule Suggestion</button>

            </div>
<!--            <h:form id="search" onkeypress="if (event.keyCode === 13) };">
                <h:inputText value="#{proposalController.searchValue}" />
            </h:form>-->
            
            <div id="suggestionBox" style="display: none;">
                <h:form>
                    <p>Proposal Title:</p>
                        <h:inputText value="#{proposalController.pro.title}" id="proptitle"></h:inputText>
                        <h:message for="proptitle"/>
                        <p>Rule to Change:</p>
                        <h:inputTextarea value="#{proposalController.pro.rule}" id="proprule" styleClass="proprule"></h:inputTextarea>
                        <h:message for="proprule"/>
                        <p>Proposal Description:</p>
                        <h:inputTextarea value="#{proposalController.pro.description}" id="propdesc" styleClass="propDesc1"></h:inputTextarea>
                        <h:message for="propdesc"/>
                        <p>Proposal Justification:</p>
                        <h:inputTextarea value="#{proposalController.pro.justification}" id="propjust" styleClass="propjust"></h:inputTextarea>
                        <h:message for="propjust"/>
                        <h:commandButton value="Submit" action="#{proposalController.doAddProposal()}"/>
                        <button type="button" id="cancelsugBTN">Cancel</button>
                </h:form>
            </div>
        <div id="suggestCont">
            <form>
            <input id="filterText" onkeydown="filter()" placeholder="Filter proposal titles"/>
            </form>
            <h:form>
            <h3>Newly Voted Proposals</h3>
            <h:dataTable id="suggestTable" value="#{proposalController.allProposals}" var="pro" class="filterable">
                <h:column>
                    <f:facet name="header">Proposal #</f:facet>
                    <h:outputText value="#{pro.id}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Proposal Title</f:facet>
                    <h:outputText value="#{pro.title}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Brief Description</f:facet>
                    <h:outputText value="#{pro.description}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Total Votes &nbsp; ↑ / ↓ / -</f:facet>
                    <h:outputText value="#{pro.upVotes} / #{pro.downVotes} / #{pro.absVotes}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Submitted By</f:facet>
                    <h:outputText value="#{pro.owner.username}"/>
                </h:column>
                <h:column>
                    <h:commandButton value="View" action="#{proposalController.doViewProposal(pro)}"/>
                    <h:commandButton value="Withdraw" action="#{proposalController.doDeleteProposal(pro)}"/>
                </h:column>
            </h:dataTable>
        </h:form>
        </div>
        </div>
        <div id="footer">

        </div>
    </h:body>
</html>

